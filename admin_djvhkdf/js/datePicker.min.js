function formatDate(c,f,e){if(!f)return"";var g,m=e?e.dayNamesShort:null,r=e?e.dayNames:null,p=e?e.monthNamesShort:null;e=e?e.monthNames:null;var j=function(b){(b=g+1<c.length&&c.charAt(g+1)===b)&&g++;return b},q=function(b,a,c){a=""+a;if(j(b))for(;a.length<c;)a="0"+a;return a},d="",a=!1;if(f)for(g=0;g<c.length;g++)if(a)"'"===c.charAt(g)&&!j("'")?a=!1:d+=c.charAt(g);else switch(c.charAt(g)){case "d":d+=q("d",f.getDate(),2);break;case "D":var b;b=f.getDay();var t=m,n=r;b=j("D")?n[b]:t[b];d+=b;break;
case "o":d+=q("o",Math.round(((new Date(f.getFullYear(),f.getMonth(),f.getDate())).getTime()-(new Date(f.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":d+=q("m",f.getMonth()+1,2);break;case "M":b=f.getMonth();t=p;n=e;b=j("M")?n[b]:t[b];d+=b;break;case "y":d+=j("y")?f.getFullYear():(10>f.getYear()%100?"0":"")+f.getYear()%100;break;case "@":d+=f.getTime();break;case "!":d+=1E4*f.getTime()+this._ticksTo1970;break;case "'":j("'")?d+="'":a=!0;break;default:d+=c.charAt(g)}return d};(function(c){var f={days:"datepickViewDays"},e='<td class="datepickBlock">;<table cellspacing="0" cellpadding="0">;<thead>;<tr>;<th colspan="7"><a class="datepickGoPrev" href="#"><span><%=prev%></span></a>;<a class="datepickMonth" href="#"><span></span></a>;<a class="datepickGoNext" href="#"><span><%=next%></span></a></th>;</tr>;<tr class="datepickDoW">;<th><span><%=day1%></span></th>;<th><span><%=day2%></span></th>;<th><span><%=day3%></span></th>;<th><span><%=day4%></span></th>;<th><span><%=day5%></span></th>;<th><span><%=day6%></span></th>;<th><span><%=day7%></span></th>;</tr>;</thead>;</table></td>'.split(";"),
g='<tbody class="datepickDays">;<tr>;<td class="<%=weeks[0].days[0].classname%>"><a href="#"><span><%=weeks[0].days[0].text%></span></a></td>;<td class="<%=weeks[0].days[1].classname%>"><a href="#"><span><%=weeks[0].days[1].text%></span></a></td>;<td class="<%=weeks[0].days[2].classname%>"><a href="#"><span><%=weeks[0].days[2].text%></span></a></td>;<td class="<%=weeks[0].days[3].classname%>"><a href="#"><span><%=weeks[0].days[3].text%></span></a></td>;<td class="<%=weeks[0].days[4].classname%>"><a href="#"><span><%=weeks[0].days[4].text%></span></a></td>;<td class="<%=weeks[0].days[5].classname%>"><a href="#"><span><%=weeks[0].days[5].text%></span></a></td>;<td class="<%=weeks[0].days[6].classname%>"><a href="#"><span><%=weeks[0].days[6].text%></span></a></td>;</tr>;<tr>;<td class="<%=weeks[1].days[0].classname%>"><a href="#"><span><%=weeks[1].days[0].text%></span></a></td>;<td class="<%=weeks[1].days[1].classname%>"><a href="#"><span><%=weeks[1].days[1].text%></span></a></td>;<td class="<%=weeks[1].days[2].classname%>"><a href="#"><span><%=weeks[1].days[2].text%></span></a></td>;<td class="<%=weeks[1].days[3].classname%>"><a href="#"><span><%=weeks[1].days[3].text%></span></a></td>;<td class="<%=weeks[1].days[4].classname%>"><a href="#"><span><%=weeks[1].days[4].text%></span></a></td>;<td class="<%=weeks[1].days[5].classname%>"><a href="#"><span><%=weeks[1].days[5].text%></span></a></td>;<td class="<%=weeks[1].days[6].classname%>"><a href="#"><span><%=weeks[1].days[6].text%></span></a></td>;</tr>;<tr>;<td class="<%=weeks[2].days[0].classname%>"><a href="#"><span><%=weeks[2].days[0].text%></span></a></td>;<td class="<%=weeks[2].days[1].classname%>"><a href="#"><span><%=weeks[2].days[1].text%></span></a></td>;<td class="<%=weeks[2].days[2].classname%>"><a href="#"><span><%=weeks[2].days[2].text%></span></a></td>;<td class="<%=weeks[2].days[3].classname%>"><a href="#"><span><%=weeks[2].days[3].text%></span></a></td>;<td class="<%=weeks[2].days[4].classname%>"><a href="#"><span><%=weeks[2].days[4].text%></span></a></td>;<td class="<%=weeks[2].days[5].classname%>"><a href="#"><span><%=weeks[2].days[5].text%></span></a></td>;<td class="<%=weeks[2].days[6].classname%>"><a href="#"><span><%=weeks[2].days[6].text%></span></a></td>;</tr>;<tr>;<td class="<%=weeks[3].days[0].classname%>"><a href="#"><span><%=weeks[3].days[0].text%></span></a></td>;<td class="<%=weeks[3].days[1].classname%>"><a href="#"><span><%=weeks[3].days[1].text%></span></a></td>;<td class="<%=weeks[3].days[2].classname%>"><a href="#"><span><%=weeks[3].days[2].text%></span></a></td>;<td class="<%=weeks[3].days[3].classname%>"><a href="#"><span><%=weeks[3].days[3].text%></span></a></td>;<td class="<%=weeks[3].days[4].classname%>"><a href="#"><span><%=weeks[3].days[4].text%></span></a></td>;<td class="<%=weeks[3].days[5].classname%>"><a href="#"><span><%=weeks[3].days[5].text%></span></a></td>;<td class="<%=weeks[3].days[6].classname%>"><a href="#"><span><%=weeks[3].days[6].text%></span></a></td>;</tr>;<tr>;<td class="<%=weeks[4].days[0].classname%>"><a href="#"><span><%=weeks[4].days[0].text%></span></a></td>;<td class="<%=weeks[4].days[1].classname%>"><a href="#"><span><%=weeks[4].days[1].text%></span></a></td>;<td class="<%=weeks[4].days[2].classname%>"><a href="#"><span><%=weeks[4].days[2].text%></span></a></td>;<td class="<%=weeks[4].days[3].classname%>"><a href="#"><span><%=weeks[4].days[3].text%></span></a></td>;<td class="<%=weeks[4].days[4].classname%>"><a href="#"><span><%=weeks[4].days[4].text%></span></a></td>;<td class="<%=weeks[4].days[5].classname%>"><a href="#"><span><%=weeks[4].days[5].text%></span></a></td>;<td class="<%=weeks[4].days[6].classname%>"><a href="#"><span><%=weeks[4].days[6].text%></span></a></td>;</tr>;<tr>;<td class="<%=weeks[5].days[0].classname%>"><a href="#"><span><%=weeks[5].days[0].text%></span></a></td>;<td class="<%=weeks[5].days[1].classname%>"><a href="#"><span><%=weeks[5].days[1].text%></span></a></td>;<td class="<%=weeks[5].days[2].classname%>"><a href="#"><span><%=weeks[5].days[2].text%></span></a></td>;<td class="<%=weeks[5].days[3].classname%>"><a href="#"><span><%=weeks[5].days[3].text%></span></a></td>;<td class="<%=weeks[5].days[4].classname%>"><a href="#"><span><%=weeks[5].days[4].text%></span></a></td>;<td class="<%=weeks[5].days[5].classname%>"><a href="#"><span><%=weeks[5].days[5].text%></span></a></td>;<td class="<%=weeks[5].days[6].classname%>"><a href="#"><span><%=weeks[5].days[6].text%></span></a></td>;</tr>;</tbody>'.split(";"),
m='<tbody class="<%=className%>">;<tr>;<td colspan="2"><a href="#"><span><%=data[0]%></span></a></td>;<td colspan="2"><a href="#"><span><%=data[1]%></span></a></td>;<td colspan="2"><a href="#"><span><%=data[2]%></span></a></td>;<td colspan="1"><a href="#"><span><%=data[3]%></span></a></td>;</tr>;<tr>;<td colspan="2"><a href="#"><span><%=data[4]%></span></a></td>;<td colspan="2"><a href="#"><span><%=data[5]%></span></a></td>;<td colspan="2"><a href="#"><span><%=data[6]%></span></a></td>;<td colspan="1"><a href="#"><span><%=data[7]%></span></a></td>;</tr>;<tr>;<td colspan="2"><a href="#"><span><%=data[8]%></span></a></td>;<td colspan="2"><a href="#"><span><%=data[9]%></span></a></td>;<td colspan="2"><a href="#"><span><%=data[10]%></span></a></td>;<td colspan="1"><a href="#"><span><%=data[11]%></span></a></td>;</tr>;</tbody>'.split(";"),
r={date:null,current:null,selectableDates:null,inline:!1,mode:"single",calendars:1,starts:0,prev:"&#9664;",next:"&#9654;",view:"days",position:"bottom",showOn:"focus",onRenderCell:function(){return{}},onChange:function(){},onRangeChange:function(){},onBeforeShow:function(){return!0},onAfterShow:function(){},onBeforeHide:function(){return!0},onAfterHide:function(){},locale:{daysMin:"SMTWTFS".split(""),months:"January February March April May June July August September October November December".split(" "),
monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")},extraHeight:!1,extraWidth:!1,lastSel:!1},p=function(b){var a=c(b).data("datepick"),n=c(b),e=Math.floor(a.calendars/2),d,h,f,j,v=0,k,l,r,p;n.find("td>table tbody").remove();for(var q=0;q<a.calendars;q++){d=new Date(a.current);d.addMonths(-e+q);p=n.find("table").eq(q+1);0==q&&p.addClass("datepickFirstView");q==a.calendars-1&&p.addClass("datepickLastView");p.hasClass("datepickViewDays")?f=d.getMonthName(!0)+", "+d.getFullYear():
p.hasClass("datepickViewMonths")?f=d.getFullYear():p.hasClass("datepickViewYears")&&(f=d.getFullYear()-6+" - "+(d.getFullYear()+5));p.find("thead tr:first th a:eq(1) span").text(f);f=d.getFullYear()-6;h={data:[],className:"datepickYears"};for(j=0;12>j;j++)h.data.push(f+j);r=tmpl(m.join(""),h);d.setDate(1);h={weeks:[],test:10};j=d.getMonth();f=(d.getDay()-a.starts)%7;d.addDays(-(f+(0>f?7:0)));for(v=0;42>v;){k=parseInt(v/7,10);l=v%7;h.weeks[k]||(h.weeks[k]={days:[]});h.weeks[k].days[l]={text:d.getDate(),
classname:[]};var u=new Date;u.getDate()==d.getDate()&&(u.getMonth()==d.getMonth()&&u.getYear()==d.getYear())&&h.weeks[k].days[l].classname.push("datepickToday");if(c.isArray(a.selectableDates)&&2==a.selectableDates.length){if(d<a.selectableDates[0]||d>a.selectableDates[1])h.weeks[k].days[l].classname.push(""),h.weeks[k].days[l].classname.push("")}else d>u&&h.weeks[k].days[l].classname.push("");j!=d.getMonth()&&(h.weeks[k].days[l].classname.push("datepickNotInMonth"),
h.weeks[k].days[l].classname.push(""));0==d.getDay()&&h.weeks[k].days[l].classname.push("datepickSunday");6==d.getDay()&&h.weeks[k].days[l].classname.push("datepickSaturday");var u=a.onRenderCell(b,d),s=d.valueOf();if(a.date&&(!c.isArray(a.date)||0<a.date.length))"tworanges"!=a.mode?(u.selected||a.date==s||c.isArray(a.date)&&-1<c.inArray(s,a.date.slice(0,2))||"range"==a.mode&&s>=a.date[0]&&s<=a.date[1])&&h.weeks[k].days[l].classname.push("datepickSelected"):((s>=a.date[0]&&
s<=a.date[1]||s==a.date[0])&&h.weeks[k].days[l].classname.push("datepickSelected"),(s>=a.date[2]&&s<=a.date[3]||s==a.date[2])&&h.weeks[k].days[l].classname.push("datepickSelected2"));u.disabled&&h.weeks[k].days[l].classname.push("");u.className&&h.weeks[k].days[l].classname.push(u.className);h.weeks[k].days[l].classname=h.weeks[k].days[l].classname.join(" ");v++;d.addDays(1)}r=tmpl(g.join(""),h)+r;p.append(r)}},j=function(b){var a=c(b).data("datepick"),d=c("#"+a.id);!1===a.extraHeight&&
(b=c(b).find("div"),a.extraHeight=b.get(0).offsetHeight+b.get(1).offsetHeight,a.extraWidth=b.get(2).offsetWidth+b.get(3).offsetWidth);d.find("table:first").get(0)},q=function(b){b.preventDefault();c(b.target).is("span")&&(b.target=b.target.parentNode);var a=c(b.target);if(a.is("a")){b.target.blur();if(a.hasClass("")||a.hasClass(""))return!1;b=c(this).data("datepick");var n=a.parent(),e=n.parent().parent().parent(),f=c("table",this).index(e.get(0))-1,h=new Date(b.current),
g=new Date(b.current),m=new Date(b.current),j=!1,k=!1,l=Math.floor(b.calendars/2);if(n.is("th"))a.hasClass("datepickMonth")?(h.addMonths(f-l),g.addMonths(f-l),m.addMonths(f-l),"tworanges"==b.mode&&(n=1<b.lastSel?2:0,a=1<b.lastSel?0:2,b.date[n]=h.setHours(0,0,0,0).valueOf(),h.addDays(h.getMaxDays()-1),h.setHours(23,59,59,0),b.date[n+1]=h.valueOf(),j=k=!0,b.lastSel=a)):n.parent().parent().is("thead")&&(e.eq(0).hasClass("datepickViewDays")&&b.current.addMonths(a.hasClass("datepickGoPrev")?-1:1),
k=!0);else if(n.is("td")&&!n.hasClass("")){if(e.eq(0).hasClass("datepickViewMonths"))b.current.setMonth(e.find("tbody.datepickMonths td").index(n)),b.current.setFullYear(parseInt(e.find("thead th a.datepickMonth span").text(),10)),b.current.addMonths(l-f),e.eq(0).toggleClass("datepickViewMonths datepickViewDays");else{if(n.hasClass(""))return!1;a=parseInt(a.text(),10);h.addMonths(f-l);n.hasClass("datepickNotInMonth")&&h.addMonths(15<a?-1:1);h.setDate(a);
n=b.lastSel;f=[1,0,3,2][b.lastSel];j=[0,0,2,2][b.lastSel];k=j+1;n==j&&(b.date[j]=h.setHours(0,0,0,0).valueOf());a=h.setHours(23,59,59,0).valueOf();a<b.date[f]?(b.date[k]=b.date[j]+86399E3,b.date[j]=a-86399E3):b.date[k]=a;b.lastSel=(n+1)%("range"==b.mode?2:4);j=!0}k=!0}k&&p(this);j&&b.onChange.apply(this,d(b))}return!1},d=function(b){var a=null,a=[];c(b.date).each(function(b,c){a.push(new Date(c))});return[a,b.el,b]},a=function(b,a){"single"!=b&&!a&&(a=[]);if(a&&(!c.isArray(a)||0<a.length))if("single"!=
b)if(c.isArray(a)){for(var d=0;d<a.length;d++)a[d]=(new Date(a[d])).setHours(0,0,0,0).valueOf();"range"==b&&(1==a.length&&a.push(new Date(a[0])),a[1]=(new Date(a[1])).setHours(23,59,59,0).valueOf())}else a=[(new Date(a)).setHours(0,0,0,0).valueOf()],"range"==b&&a.push((new Date(a[0])).setHours(23,59,59,0).valueOf());else a=(new Date(a)).setHours(0,0,0,0).valueOf();return a};c.fn.extend({datepick:function(b){b=c.extend({},r,b||{});var d=b.locale;Date.prototype.tempDate||(Date.prototype.tempDate=
null,Date.prototype.months=d.months,Date.prototype.monthsShort=d.monthsShort,Date.prototype.getMonthName=function(a){return this[a?"months":"monthsShort"][this.getMonth()]},Date.prototype.addDays=function(a){this.setDate(this.getDate()+a);this.tempDate=this.getDate()},Date.prototype.addMonths=function(a){null==this.tempDate&&(this.tempDate=this.getDate());this.setDate(1);this.setMonth(this.getMonth()+a);this.setDate(Math.min(this.tempDate,this.getMaxDays()))},Date.prototype.addYears=function(a){null==
this.tempDate&&(this.tempDate=this.getDate());this.setDate(1);this.setFullYear(this.getFullYear()+a);this.setDate(Math.min(this.tempDate,this.getMaxDays()))},Date.prototype.getMaxDays=function(){var a=new Date(Date.parse(this)),b=28,c;c=a.getMonth();for(b=28;a.getMonth()==c;)b++,a.setDate(b);return b-1});b.calendars=Math.max(1,parseInt(b.calendars,10)||1);b.mode=/single|multiple|range/.test(b.mode)?b.mode:"single";return this.each(function(){if(!c(this).data("datepick")){b.el=this;b.date=a(b.mode,
b.date);b.current=b.current?new Date(b.current):new Date;b.current.setDate(1);b.current.setHours(0,0,0,0);var d="datepick_"+parseInt(1E3*Math.random());b.id=d;c(this).data("datepickId",b.id);var g=c('<div class="datepick"><div class="datepickBorderBR" /><div class="datepickContainer"><table cellspacing="0" cellpadding="0"><tbody><tr></tr></tbody></table></div></div>').attr("id",d).bind("click",q).data("datepick",b);b.className&&g.addClass(b.className);for(var t="",h=0;h<b.calendars;h++)d=
b.starts,0<h&&(t+='<td class="datepickSpace"><div></div></td>'),t+=tmpl(e.join(""),{prev:b.prev,next:b.next,day1:b.locale.daysMin[d++%7],day2:b.locale.daysMin[d++%7],day3:b.locale.daysMin[d++%7],day4:b.locale.daysMin[d++%7],day5:b.locale.daysMin[d++%7],day6:b.locale.daysMin[d++%7],day7:b.locale.daysMin[d++%7]});g.find("tr:first").append(t).find("table").addClass(f[b.view]);p(g.get(0));b.inline?(g.appendTo(this).show().css("position","relative"),j(g.get(0))):(g.appendTo(document.body),c(this).bind(b.showOn,
show))}/range/.test(b.mode)&&g.addClass("selectableRange")})},datepickHide:function(){return this.each(function(){c(this).data("datepickId")&&(c("#"+c(this).data("datepickId")).data("datepick").inline||c("#"+c(this).data("datepickId")).hide())})},datepickShow:function(){return this.each(function(){c(this).data("datepickId")&&(c("#"+c(this).data("datepickId")).data("datepick").inline||show.apply(this))})},datepickSetDate:function(b,d){return this.each(function(){if(c(this).data("datepickId")){var e=
c("#"+c(this).data("datepickId")),f=e.data("datepick");f.date=a(f.mode,b);d&&(f.current=new Date("single"!=f.mode?f.date[0]:f.date));p(e.get(0))}})},datepickGetDate:function(){if(0<this.size())return d(c("#"+c(this).data("datepickId")).data("datepick"))},datepickClear:function(){return this.each(function(){if(c(this).data("datepickId")){var a=c("#"+c(this).data("datepickId")),d=a.data("datepick");d.date="single"==d.mode?null:[];p(a.get(0))}})},datepickGetLastSel:function(){return c("#"+
c(this).data("datepickId")).data("datepick").lastSel},datepickSetLastSel:function(a){c("#"+c(this).data("datepickId")).data("datepick").lastSel=parseInt(a)},datepickGetMode:function(){return c("#"+c(this).data("datepickId")).data("datepick").mode},datepickSetMode:function(a){var d=c("#"+c(this).data("datepickId"));d.data("datepick").mode=a;p(d)},datepickLayout:function(){return this.each(function(){if(c(this).data("datepickId")){var a=c("#"+c(this).data("datepickId"));
a.data("datepick").inline&&j(a.get(0))}})}})})(jQuery);
(function(){var c={};this.tmpl=function e(g,m){var r=!/\W/.test(g)?c[g]=c[g]||e(document.getElementById(g).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+g.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return m?r(m):r}})(jQuery);(function(c){var f,e,g,m,r,p={values:{}},j={custom:{title:"Custom",dates:function(){return null}},lastweeks:{title:"Last Week",dates:function(){var a=[],b=d.getMonday(new Date);b.setDate(b.getDate()-7);a[0]=b.valueOf();b=new Date(b);b.setDate(b.getDate()+6+0);b.setHours(23,59,59,0);a[1]=b.valueOf();return a}},last7days:{title:"Last 7 Days",dates:function(){var a=[],b=new Date;a[0]=(new Date).setDate(b.getDate()-7).valueOf();a[1]=new Date;a[1].setDate(b.getDate()-1);a[1].setHours(23,59,59,0);return a}},
lastmonths:{title:"Last Month",dates:function(){var a=[],b=(new Date).setDate(0),c=new Date(b);c.setDate(1);c.setMonth(c.getMonth()-1+1);a[0]=c.valueOf();a[1]=b.valueOf();return a}},last30days:{title:"Last 30 Days",dates:function(){var a=[],b=new Date;a[0]=(new Date(b)).setDate(b.getDate()-30).valueOf();a[1]=new Date(b);a[1].setDate(b.getDate()-1);a[1].setHours(23,59,59,0);return a}}},q={init:function(a){this.element=c(this);return this.each(function(){var b=c(this);if(!b.data("DateRangesWidget")){var e=
c.extend({},p,a);b.data("DateRangesWidget",{options:e})}d.createElements(b);d.updateDateField(b)})}},d={refreshForm:function(){var a=g.datepickGetLastSel();g.datepickSetLastSel(a%2);var a=g.datepickGetDate()[0],b=a[0].getDate()+"/"+(a[0].getMonth()+1)+"/"+a[0].getFullYear(),d=a[1].getDate()+"/"+(a[1].getMonth()+1)+"/"+a[1].getFullYear(),f=c(".dr1.from",e).val(),j=c(".dr1.to",e).val();if(b!=f||d!=j)c(".dr1.from",e).val(b),c(".dr1.to",e).val(d);a[2]&&c(".dr2.from",e).val(a[2].getDate()+"/"+(a[2].getMonth()+
1)+"/"+a[2].getFullYear());a[3]&&c(".dr2.to",e).val(a[3].getDate()+"/"+(a[3].getMonth()+1)+"/"+a[3].getFullYear())},createElements:function(a){a.html('<div class="date-range-field"><span class="main"></span><a href="#">&#9660;</a></div>');e||(e=c('<div id="datepick-dropdown"><div class="date-ranges-picker"></div><div class="date-ranges-form"><span>Use the calendar to select the period</span><div class="date-range-wrap"><label>Date Range:</label><select class="daterange-preset"></select></div><div class="main-daterange"><input type="text"  class="dr dr1 from" lastSel="0" /> - <input type="text"  class="dr dr1 to" lastSel="1" /></div><div class="legend"><div class="color-wrap"><span class="color selected"></span><span class="explain">Selected period</span></div><div class="color-wrap"><span class="color compare"></span><span class="explain">Compared period</span></div></div><div class="actions"><div class="btn primary ok">Ok</div><div class="btn cancel">Cancel</div></div></div></div>'),
e.appendTo(c("body")),g=c(".date-ranges-picker",e),m=c(".daterange-preset",e),r=a.data("DateRangesWidget").options,g.datepick(c.extend({},{mode:"tworanges",starts:1,calendars:3,inline:!0,onChange:function(){d.setDaterangePreset("custom")}},r)),m.change(function(){d.getDaterangePreset();d.recalculateDaterange()}),c(".dr",e).click(function(){}),c("div.ok",e).click(function(){d.retractDropdown(f);d.saveValues(f);d.updateDateField(f);r.afterSave.apply(g.datepickGetDate()[0]);return!1}),c("div.cancel",
e).click(function(){d.retractDropdown(f);return!1}));a.bind("click",function(){var a=c(this);a.hasClass("DRWClosed")?d.expandDropdown(a):d.retractDropdown(a);return!1});a.addClass("DRWInitialized");a.addClass("DRWClosed")},recalculateDaterange:function(){var a=d.getDaterangePreset(),b=g.datepickGetDate()[0],a=a.dates();null!=a&&(b[0]=a[0],b[1]=a[1]);g.datepickSetDate(b);d.recalculateComparison()},recalculateComparison:function(){var a=g.datepickGetDate()[0];if(2<=a.length){var b=parseInt((a[1]-
a[0])/864E5);a[2]=(new Date(a[0])).setDate(a[0].getDate()-(b+1));a[3]=(new Date(a[1])).setDate(a[1].getDate()-(b+1));g.datepickSetDate(a);d.refreshForm()}},loadValues:function(a){a=a.data("DateRangesWidget").options.values;c(".dr1.from",e).val(a.dr1from);c(".dr1.from",e).change();c(".dr1.to",e).val(a.dr1to);c(".dr1.to",e).change();c(".dr2.from",e).val(a.dr2from);c(".dr2.from",e).change();c(".dr2.to",e).val(a.dr2to);c(".dr2.to",e).change();m.val(a.daterangePreset);m.change()},saveValues:function(a){var b=
a.data("DateRangesWidget"),f=b.options.values;f.daterangePreset=d.getDaterangePresetVal();f.dr1from=c(".dr1.from",e).val();f.dr1to=c(".dr1.to",e).val();f.dr2from=c(".dr2.from",e).val();f.dr2to=c(".dr2.to",e).val();a.data("DateRangesWidget",b)},updateDateField:function(a){var b=a.data("DateRangesWidget").options.values;b.dr1from&&b.dr1to?c("span.main",a).text(b.dr1from+" - "+b.dr1to):c("span.main",a).text("N/A");c("span.comparison",a).text(b.dr2from+" - "+b.dr2to);c("span.comparison",a).show();c("span.comparison-divider",
a).show();return!0},getDaterangePresetVal:function(){return m.val()},getDaterangePreset:function(){return j[m.val()]},setDaterangePreset:function(a){m.val(a);m.change()},populateDateRangePresets:function(){var a=[],b=c("<optgroup/>"),d=m.val();m.html("");c.each(a,function(a,b){var d=j[b];if(void 0==d)throw'Invalid preset "'+b+'".';m.append(c("<option/>",{value:b,text:d.title}))});c.each(j,function(d,e){-1==c.inArray(d,a)&&b.append(c("<option/>",{value:d,text:e.title}))});m.append(b);m.val(d)},expandDropdown:function(a){a.data("DateRangesWidget");
f=a;d.populateDateRangePresets();d.loadValues(a);c(".DRWOpened").each(function(){d.retractDropdown(c(this))});var b=a.offset().left,g=c(document).width()-a.offset().left-a.width();e.show();g>b?e.offset({left:a.offset().left,top:a.offset().top+a.height()-1}).css("border-radius","0 5px 5px 5px"):(b=parseInt(e.css("padding-left").replace("px",""))+parseInt(e.css("padding-right").replace("px",""))+parseInt(e.css("border-left-width").replace("px",""))+parseInt(e.css("border-right-width").replace("px",
"")),e.offset({left:a.offset().left+a.width()-e.width()-b,top:a.offset().top+a.height()-1}).css("border-radius","5px 0 5px 5px"));c(".date-range-field a",a).html("&#9650;");a.addClass("DRWOpened");a.removeClass("DRWClosed");d.recalculateDaterange()},retractDropdown:function(a){e.hide();c(".date-range-field a",a).html("&#9660;");a.addClass("DRWClosed");a.removeClass("DRWOpened")},getMonday:function(a){a=new Date(a);var b=a.getDay(),b=a.getDate()-b+(0==b?-6:1);return new Date(a.setDate(b))}};c.fn.DateRangesWidget=
function(a){if(q[a])return q[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return q.init.apply(this,arguments);c.error("Method "+a+" does not exist on jQuery.DateRangesWidget")}})(jQuery);
